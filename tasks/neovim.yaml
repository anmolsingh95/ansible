---
- name: Download Neovim AppImage
  get_url:
    url: https://github.com/neovim/neovim/releases/download/stable/nvim.appimage
    dest: "/tmp/nvim.appimage"
    mode: '0755'

- name: Make Neovim AppImage executable
  file:
    path: "/tmp/nvim.appimage"
    mode: '0755'

- name: Move Neovim AppImage to ~/.local/bin
  command: mv /tmp/nvim.appimage ~/.local/bin/nvim
  become_user: "{{ ssh_user }}"

- name: Remove Neovim AppImage from /tmp
  file:
    path: "/tmp/nvim.appimage"
    state: absent
